import React from 'react';
import { Link, LinkProps, useLocation, useMatch, useResolvedPath } from "react-router-dom";

const CustomSidebarLink: (linkProps: LinkProps) => JSX.Element = ({children, to, ...props}: LinkProps) => {
    let resolved = useResolvedPath(to);
    const location = useLocation();
    let match = useMatch({path: resolved.pathname, end: false});

    return (
        <li
            className={match ? 'active' : ''}
        >
            <Link
                to={to}
                {...props}
            >
                {children}
            </Link>
        </li>
    );
}

const Sidebar: React.FC = () => {
    return (
        <nav className="sidebar">
            <ul
                data-testid='sidebar-links'
            >
                <CustomSidebarLink
                    to="/dashboard"
                >
                    <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M9.33335 6.66699C8.62611 6.66699 7.94783 6.94794 7.44774 7.44804C6.94764 7.94814 6.66669 8.62641 6.66669 9.33366V12.0003C6.66669 12.7076 6.94764 13.3858 7.44774 13.8859C7.94783 14.386 8.62611 14.667 9.33335 14.667H12C12.7073 14.667 13.3855 14.386 13.8856 13.8859C14.3857 13.3858 14.6667 12.7076 14.6667 12.0003V9.33366C14.6667 8.62641 14.3857 7.94814 13.8856 7.44804C13.3855 6.94794 12.7073 6.66699 12 6.66699H9.33335ZM9.33335 17.3337C8.62611 17.3337 7.94783 17.6146 7.44774 18.1147C6.94764 18.6148 6.66669 19.2931 6.66669 20.0003V22.667C6.66669 23.3742 6.94764 24.0525 7.44774 24.5526C7.94783 25.0527 8.62611 25.3337 9.33335 25.3337H12C12.7073 25.3337 13.3855 25.0527 13.8856 24.5526C14.3857 24.0525 14.6667 23.3742 14.6667 22.667V20.0003C14.6667 19.2931 14.3857 18.6148 13.8856 18.1147C13.3855 17.6146 12.7073 17.3337 12 17.3337H9.33335ZM17.3334 9.33366C17.3334 8.62641 17.6143 7.94814 18.1144 7.44804C18.6145 6.94794 19.2928 6.66699 20 6.66699H22.6667C23.3739 6.66699 24.0522 6.94794 24.5523 7.44804C25.0524 7.94814 25.3334 8.62641 25.3334 9.33366V12.0003C25.3334 12.7076 25.0524 13.3858 24.5523 13.8859C24.0522 14.386 23.3739 14.667 22.6667 14.667H20C19.2928 14.667 18.6145 14.386 18.1144 13.8859C17.6143 13.3858 17.3334 12.7076 17.3334 12.0003V9.33366ZM17.3334 20.0003C17.3334 19.2931 17.6143 18.6148 18.1144 18.1147C18.6145 17.6146 19.2928 17.3337 20 17.3337H22.6667C23.3739 17.3337 24.0522 17.6146 24.5523 18.1147C25.0524 18.6148 25.3334 19.2931 25.3334 20.0003V22.667C25.3334 23.3742 25.0524 24.0525 24.5523 24.5526C24.0522 25.0527 23.3739 25.3337 22.6667 25.3337H20C19.2928 25.3337 18.6145 25.0527 18.1144 24.5526C17.6143 24.0525 17.3334 23.3742 17.3334 22.667V20.0003Z"
                            fill="#A7B2CD"/>
                    </svg>
                    Dashboard
                </CustomSidebarLink>
                <CustomSidebarLink
                    to="/batch-screening"
                    className={'d-flex justify-content-between align-items-center'}
                >
                    <div>
                        <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.78103 6.11454C8.28093 6.61464 7.99998 7.29292 7.99998 8.00016V15.3708C9.52408 14.0084 11.5119 13.2811 13.5554 13.3383C15.5989 13.3955 17.5429 14.2328 18.9885 15.6784C20.434 17.1239 21.2713 19.0679 21.3285 21.1114C21.3857 23.1549 20.6584 25.1427 19.296 26.6668H21.3333C22.0406 26.6668 22.7188 26.3859 23.2189 25.8858C23.719 25.3857 24 24.7074 24 24.0002V12.5522C23.9998 11.845 23.7188 11.1668 23.2186 10.6668L18.6666 6.11483C18.1667 5.6147 17.4885 5.33365 16.7813 5.3335H10.6666C9.9594 5.3335 9.28113 5.61445 8.78103 6.11454Z"
                                fill="#A7B2CD"/>
                            <path fillRule="evenodd" clipRule="evenodd"
                                  d="M10.6556 16.7206C11.469 16.2486 12.3928 16 13.3333 16.0002C14.1533 16.0004 14.9622 16.1897 15.6972 16.5533C16.4322 16.917 17.0734 17.4453 17.571 18.097C18.0687 18.7488 18.4093 19.5066 18.5664 20.3114C18.7236 21.1163 18.693 21.9465 18.4771 22.7376C18.2613 23.5287 17.8658 24.2594 17.3217 24.8728C16.7775 25.4863 16.0991 25.966 15.3394 26.2746C14.5797 26.5833 13.759 26.7126 12.9412 26.6525C12.1233 26.5924 11.3304 26.3445 10.6239 25.9282L8.94259 27.6095C8.81871 27.7333 8.67166 27.8315 8.50984 27.8984C8.34801 27.9654 8.17458 27.9998 7.99945 27.9998C7.82432 27.9997 7.65092 27.9651 7.48914 27.8981C7.32736 27.831 7.18038 27.7327 7.05659 27.6088C6.9328 27.4849 6.83462 27.3379 6.76766 27.1761C6.70069 27.0142 6.66626 26.8408 6.66632 26.6657C6.66638 26.4906 6.70094 26.3172 6.76802 26.1554C6.83509 25.9936 6.93338 25.8466 7.05726 25.7228L8.73859 24.0428C8.26084 23.2328 8.00579 22.3108 7.99929 21.3704C7.99279 20.4299 8.23508 19.5045 8.70158 18.6879C9.16809 17.8713 9.84222 17.1926 10.6556 16.7206ZM11.4476 19.4479C10.9475 19.948 10.6666 20.6263 10.6666 21.3335C10.6666 22.0407 10.9475 22.719 11.4476 23.2191C11.9477 23.7192 12.626 24.0002 13.3333 24.0002C14.0405 24.0002 14.7188 23.7192 15.2189 23.2191C15.719 22.719 15.9999 22.0407 15.9999 21.3335C15.9999 20.6263 15.719 19.948 15.2189 19.4479C14.7188 18.9478 14.0405 18.6668 13.3333 18.6668C12.626 18.6668 11.9477 18.9478 11.4476 19.4479Z"
                                  fill="#A7B2CD"/>
                        </svg>
                        Batch Screening
                    </div>
                    {/*<span className="badge badge-pill badge-pink text-white">2</span>*/}
                </CustomSidebarLink>
                <CustomSidebarLink
                    to="/lightning-screening"
                >
                    <svg width="32" height="32" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd"
                              d="M17.7333 4.06144C18.004 4.14656 18.2404 4.31581 18.4083 4.54458C18.5761 4.77334 18.6666 5.04969 18.6666 5.33344V12.0001H23.9999C24.2438 12 24.4831 12.0668 24.6917 12.1932C24.9002 12.3196 25.0701 12.5008 25.1829 12.7171C25.2956 12.9334 25.3469 13.1764 25.3311 13.4198C25.3153 13.6632 25.233 13.8976 25.0933 14.0974L15.7599 27.4308C15.5975 27.6635 15.365 27.8383 15.0964 27.9298C14.8277 28.0213 14.5369 28.0246 14.2662 27.9394C13.9955 27.8542 13.7591 27.6848 13.5913 27.4559C13.4235 27.227 13.3331 26.9506 13.3333 26.6668V20.0001H7.99994C7.75605 20.0002 7.5168 19.9334 7.30823 19.807C7.09966 19.6806 6.92976 19.4994 6.81702 19.2831C6.70428 19.0668 6.65302 18.8238 6.66882 18.5804C6.68461 18.337 6.76686 18.1027 6.90661 17.9028L16.2399 4.56944C16.4026 4.33715 16.6351 4.16279 16.9037 4.07167C17.1722 3.98056 17.4628 3.97744 17.7333 4.06277V4.06144Z"
                              fill="#A7B2CD"/>
                    </svg>
                    Real-Time Screening
                </CustomSidebarLink>
            </ul>
        </nav>

    );
};

export default Sidebar;
